This directory has patches to newlib to build a version that runs on
the TS2 68000 single board computer. They also work with newlib-nano.

The script build.sh will download, build and install a suitable
cross-compiler version of gcc and then build and install newlib.

The i/o routines for the TS2 use the TUTOR monitor trap 14 functions.
Control returns, via _exit(), to the TUTOR monitor. The only i/o
functions supported are standard input and output which use the
console serial port.

The program, data, heap, and stack cannot exceed the 32K of available
memory (actually 30K as the first 2K are used by exception vectors and
TUTOR).

Floating point math is supported, but done in software and will
therefore be slow and generate a lot of code. The smaller version of
printf() in newlib is used which does not support printing floating
point values.

The linker map file is set up to generate an S record run file. If you
want an object file (e.g. for disassembly), see the comments near the
top of the file ts2.ld (or use the srec2bin progam to convert it).

Known issues:

Most newlib functions have not been tested. Only a few very small,
simple C programs have been tried. See the newlib_example directory
for some examples.

The exit() routine was crashing due to an issue with the atexit
handlers. It appears that the code generated by this version of gcc is
not compatible with the newlib implementation. I've worked around this
by not calling exit, and directly calling _exit() after main() is
executed.

Calling printf with a string, like this:
    printf("%s", string);
usually results in an infinite loop of printing characters beyond the
end of the string. The workaround is to use code like this:
    printf(string);
I do not see this issue when using newlib-nano.

Extraneous newline characters may get output when printing.
